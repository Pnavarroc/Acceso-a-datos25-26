ğŸ”¹ NIVEL 1 â€“ BÃ¡sicas pero obligatorias
1ï¸âƒ£ Buscar libros publicados despuÃ©s del aÃ±o 2000

ğŸ‘‰ Campo simple + operador $gt


db.libros.find(
    {anioPublicacion: {$gt: 2000}}
)

2ï¸âƒ£ Buscar libros con precio menor a 20â‚¬

ğŸ‘‰ $lt

db.libros.find(
    {precio: {$lt: 20}}
)

3ï¸âƒ£ Buscar libros con mÃ¡s de 400 pÃ¡ginas

ğŸ‘‰ $gt sobre numeroPaginas

db.libros.find(
    {numeroPaginas: {$gt:400}}
)

4ï¸âƒ£ Buscar libros cuya editorial sea "Addison-Wesley"

ğŸ‘‰ Igualdad simple

db.libros.find(
    {editorial: "Addison-Wesley"}
)

ğŸ”¹ NIVEL 2 â€“ Arrays de strings
5ï¸âƒ£ Buscar libros que pertenezcan a la categorÃ­a "ProgramaciÃ³n"

ğŸ‘‰ Campo categorias (array de strings)

db.libros.find(
    {categorias: "ProgramaciÃ³n" }
)

6ï¸âƒ£ Buscar libros que tengan la categorÃ­a "FicciÃ³n" Y "Misterio"

ğŸ‘‰ AquÃ­ hay que pensar bien
No es igual que una sola categorÃ­a.

db.libros.find(
    {categorias: {$all["FicciÃ³n","Misterio"]}}
)

ğŸ”¹ NIVEL 3 â€“ Arrays embebidos (autores)
7ï¸âƒ£ Buscar libros cuyo autor sea "George Orwell"

ğŸ‘‰ autores.nombre

db.libros.find(
    {"autores.nombre": "George Orwell"}
)

8ï¸âƒ£ Buscar libros escritos por autores de nacionalidad "Estados Unidos"

ğŸ‘‰ Campo embebido dentro de array

db.libros.find(
    {"autores.nacionalidad": "Estados Unidos"}
)

9ï¸âƒ£ Buscar libros que tengan MÃS DE UN autor

ğŸ‘‰ $size o combinaciÃ³n lÃ³gica

db.libros.find(
    {"autores.1": {$exists: true}}
)

ğŸ”¹ NIVEL 4 â€“ MÃ¡s examen puro
ğŸ”Ÿ Mostrar solo:

titulo

precio

y ocultar _id

ğŸ‘‰ ProyecciÃ³n


db.libros.aggregate([
    {
        $project:{
            "titulo":1,
            "precio":1,
            "_id":0
        }
    }
])

ğŸ”¥ BONUS (si te sobra tiempo)
11ï¸âƒ£ Calcular el precio promedio de todos los libros

ğŸ‘‰ aggregate
ğŸ‘‰ $group
ğŸ‘‰ $avg



ğŸ”¥ NIVEL EXAMEN â€“ Aggregate y CÃ¡lculos
1ï¸âƒ£ Calcular el nÃºmero total de libros

ğŸ‘‰ Debe devolver solo el nÃºmero total.

Pista:

$count

o $group

db.libros.aggregate([
    {
        $group:{
            "_id":1,
            numeroLibros: {$sum:1}
        }
    },
    {
        $project:{
            "_id":0
        }
    }
])

2ï¸âƒ£ Calcular el precio promedio de los libros publicados despuÃ©s del aÃ±o 2000

ğŸ‘‰ AquÃ­ ya hay:

$match

$group

$avg

db.libros.aggregate([
    {
        $match:{
           "anioPublicacion": {$gt:2000}
        }
    },
    {
        $group:{
            "_id":1
            precioPromedio:{$avg:"$precio"}
        }
    },
    {
        $project:{
            "_id":0
        }
    }
])

3ï¸âƒ£ Obtener el libro mÃ¡s caro

ğŸ‘‰ Debe mostrar:

tÃ­tulo

precio

Pista:

$sort

$limit

db.libros.aggregate([
    {
        $sort: {"precio":-1}
    },
    {
        $limit:1
    },
    {
        $project:{
            "titulo":1,
            "precio":1,
            "_id":0
        }
    }
])

4ï¸âƒ£ Mostrar el nÃºmero de libros por editorial

ğŸ‘‰ Resultado esperado tipo:

Addison-Wesley â†’ 2
Planeta â†’ 1
...


Pista:

$group

_id: "$editorial"

$sum: 1

db.libros.aggregate([
    {
        $group:{
            "_id":"$editorial",
            numeroLibros: {$sum:1}
        }
    }
])

5ï¸âƒ£ Calcular el precio promedio por categorÃ­a

ğŸ‘‰ Esta es la mÃ¡s potente.

Resultado esperado tipo:

ProgramaciÃ³n â†’ promedio X
FicciÃ³n â†’ promedio Y
...


Pista:

$unwind

$group

$avg

db.libros.aggregate([
    {
        $unwind: "$categorias"
    },
    {
        $group:{
            _id:"$categorias",
            precioMedio: {$avg:"$precio"}
        }
    },
    {
        $project:{
            categoria:"$_id",
            precioMedio:1,
            _id:0
        }
    }
])

ğŸ”¥ Esta es MUY de examen.